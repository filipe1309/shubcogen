#!/bin/bash

# DOTR

# Update Tag Version (with semantic versioning) by commit

NEWEST_TAG=$(git describe --abbrev=0 --tags)

SCRIPT_VERSION=$(grep "^VERSION=" bin/deploy.sh | awk -F= '{print $2}')

echo $NEWEST_TAG
echo $SCRIPT_VERSION
echo "version $SCRIPT_VERSION"

if [ x$NEWEST_TAG != x$SCRIPT_VERSION ]; then
    echo "NEW VERSION TAG ADDED: $SCRIPT_VERSION"
    git tag -a $SCRIPT_VERSION -m "Version $SCRIPT_VERSION"
fi
